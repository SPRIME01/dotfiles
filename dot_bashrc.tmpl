# Managed by chezmoi - Bash rc (WSL fallback)
# Minimal, idempotent, and safe-by-default.

# History hygiene
export HISTCONTROL=ignoreboth:erasedups
export HISTIGNORE="ls:cd:cd -:pwd:exit:date:* --help"
export HISTTIMEFORMAT='%F %T '
shopt -s histappend checkwinsize

# Include direnv hook partial by filename
{{- include "templates/partials/direnv_hook.tmpl" -}}

# Include ssh agent bridge partial
{{- include "templates/partials/ssh_agent_bridge.tmpl" -}}

# Include projects path partial
{{- include "templates/partials/projects_path.tmpl" -}}

{{ if eq .chezmoi.os "linux" }}
{{-   $rel := lower .chezmoi.kernel.osrelease -}}
{{   if or (contains $rel "microsoft") (hasPrefix $rel "microsoft") (ne (env "WSL_DISTRO_NAME") "") }}
# WSL-specific PATH configuration
# Include WSL path partial
{{- include "templates/partials/wsl_path.tmpl" -}}
{{   end }}
{{ else if eq .chezmoi.os "windows" }}
# Windows-specific PATH configuration
# Include Windows path partial
{{- include "templates/partials/windows_path.tmpl" -}}
{{ else if eq .chezmoi.os "darwin" }}
# macOS-specific PATH configuration
# Include macOS path partial
{{- include "templates/partials/macos_path.tmpl" -}}
{{ end }}

# End of minimal template â€” extend via ~/.bashrc.local as needed
[[ -f "$HOME/.bashrc.local" ]] && source "$HOME/.bashrc.local"
