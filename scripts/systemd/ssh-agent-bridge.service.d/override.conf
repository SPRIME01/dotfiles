[Unit]
# Ensure Windows drive is mounted before starting (WSL DrvFS)
After=mnt-c.mount
Requires=mnt-c.mount

[Service]
# Consistent socket location; avoid reliance on cwd
Environment=SSH_AUTH_SOCK=%h/.ssh/ssh-agent-bridge.sock
# Never rely on cwd being a Windows-mounted path
WorkingDirectory=%h
# Prepare socket directory and remove stale socket before start
ExecStartPre=/usr/bin/mkdir -p %h/.ssh
ExecStartPre=/usr/bin/rm -f %h/.ssh/ssh-agent-bridge.sock

